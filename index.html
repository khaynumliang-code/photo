<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>梦幻永恒星系 - ttpp</title>
    <style>
        :root {
            --glow-color: rgba(0, 242, 255, 0.5);
            --accent-color: rgba(255, 0, 193, 0.4);
        }

        body {
            margin: 0;
            background: #000;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1500px;
        }

        /* 1. 星云层：色彩流转 */
        #nebula {
            position: fixed;
            width: 200%; height: 200%;
            top: -50%; left: -50%;
            background: 
                radial-gradient(circle at 30% 30%, rgba(0, 210, 255, 0.1) 0%, transparent 40%),
                radial-gradient(circle at 70% 70%, rgba(255, 0, 193, 0.1) 0%, transparent 40%),
                #020408;
            z-index: -2;
            animation: nebulaMove 40s infinite linear;
        }

        @keyframes nebulaMove {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* 2. 星星层：闪烁效果 */
        #starfield {
            position: fixed;
            width: 100%; height: 100%;
            z-index: -1;
        }

        .star {
            position: absolute;
            background: #fff;
            border-radius: 50%;
            animation: twinkle var(--d) infinite ease-in-out;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.2; transform: scale(0.7); }
            50% { opacity: 0.9; transform: scale(1.1); }
        }

        /* 3. 舞台与旋转体 */
        .stage {
            position: fixed;
            top: 50%; left: 50%;
            transform-style: preserve-3d;
            will-change: transform;
        }

        .carousel, .outer-carousel {
            position: absolute;
            transform-style: preserve-3d;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* 照片卡片：发光与倒影 */
        .photo {
            position: absolute;
            width: 220px;
            height: 310px;
            object-fit: cover;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 0 30px var(--glow-color);
            margin-left: -110px;
            margin-top: -155px;
            -webkit-box-reflect: below 25px linear-gradient(transparent, rgba(0,0,0,0.2));
            transition: filter 0.8s ease;
        }

        /* 粒子星环 */
        .particle {
            position: absolute;
            width: 6px; height: 6px;
            background: #fff;
            border-radius: 50%;
            box-shadow: 0 0 10px #fff, 0 0 20px #00d2ff;
            margin-left: -3px; margin-top: -3px;
        }

        @media (max-width: 768px) {
            .photo { width: 130px; height: 180px; margin-left: -65px; margin-top: -90px; }
        }
    </style>
</head>
<body>

    <div id="nebula"></div>
    <div id="starfield"></div>

    <div class="stage" id="stage">
        <div class="carousel" id="carousel"></div>
        <div class="outer-carousel" id="outer-carousel"></div>
    </div>

    <script>
        const myImages = ['ttpp1.jpg', 'ttpp2.jpg', 'ttpp3.jpg'];
        const isMobile = window.innerWidth <= 768;

        // 初始化繁星
        function createStars() {
            const field = document.getElementById('starfield');
            for (let i = 0; i < (isMobile ? 80 : 200); i++) {
                const star = document.createElement('div');
                star.className = 'star';
                const size = Math.random() * 2.5 + 'px';
                star.style.width = size;
                star.style.height = size;
                star.style.left = Math.random() * 100 + 'vw';
                star.style.top = Math.random() * 100 + 'vh';
                star.style.setProperty('--d', (Math.random() * 4 + 2) + 's');
                field.appendChild(star);
            }
        }

        // 初始化画廊与粒子环
        function init() {
            const carousel = document.getElementById('carousel');
            const outer = document.getElementById('outer-carousel');
            
            const totalPhotos = isMobile ? 8 : 12;
            const radiusPhotos = isMobile ? 220 : 600;

            for (let i = 0; i < totalPhotos; i++) {
                const img = document.createElement('img');
                img.className = 'photo';
                img.src = myImages[i % myImages.length];
                img.onerror = function() { this.src = `https://picsum.photos/400/600?random=${i}`; };
                const angle = i * (360 / totalPhotos);
                img.style.transform = `rotateY(${angle}deg) translateZ(${radiusPhotos}px)`;
                carousel.appendChild(img);
            }

            const totalParticles = 40;
            const radiusOuter = isMobile ? 350 : 900;
            for (let i = 0; i < totalParticles; i++) {
                const p = document.createElement('div');
                p.className = 'particle';
                const angle = i * (360 / totalParticles);
                const randomY = (Math.random() - 0.5) * 600;
                p.style.transform = `rotateY(${angle}deg) translateZ(${radiusOuter}px) translateY(${randomY}px)`;
                outer.appendChild(p);
            }
        }

        let frame = 0;
        function render() {
            frame += 0.005; // 自动运行的速度系数

            const stage = document.getElementById('stage');
            const carousel = document.getElementById('carousel');
            const outer = document.getElementById('outer-carousel');
            const photos = document.querySelectorAll('.photo');

            // 核心动态逻辑
            const rotY = frame * 40; // 绕Y轴匀速转动
            const rotX = -10 + Math.sin(frame * 0.5) * 15; // 随时间缓慢俯仰
            const floatY = Math.cos(frame * 0.8) * 25; // 随时间缓慢上下浮动

            // 应用变换：居中平移 + 浮动 + 俯仰
            stage.style.transform = `translate(-50%, calc(-50% + ${floatY}px)) rotateX(${rotX}deg)`;
            
            // 内圈照片旋转
            carousel.style.transform = `rotateY(${rotY}deg)`;
            
            // 外圈粒子反向旋转，更有层次感
            outer.style.transform = `rotateY(${-rotY * 0.3}deg)`;

            // 智能景深效果
            photos.forEach((p, i) => {
                const angle = (i * (360 / photos.length) + rotY) % 360;
                const normalized = Math.abs(((angle + 180) % 360) - 180);
                const focus = (180 - normalized) / 180;
                
                p.style.filter = `brightness(${0.3 + focus * 0.9}) blur(${(1 - focus) * 2}px)`;
                p.style.zIndex = Math.round(focus * 100);
            });

            requestAnimationFrame(render);
        }

        createStars();
        init();
        render();
    </script>
</body>
</html>
